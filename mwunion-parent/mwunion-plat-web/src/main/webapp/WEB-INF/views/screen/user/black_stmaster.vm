#@screen({"title":"客户端查询"})
    #@form({"name":"stmastersearchForm"})
        #@panel({"title":"查询条件"})
            #textfield({"label":"账号 ", "name":"userName ","value":"","defValue":""})
            #textfield({"label":"站长", "name":"stmasterName ","value":"","defValue":""})
            #textfield({"label":"接待员", "name":"recName ","value":"","defValue":""})
            #textfield({"label":"手机号 ", "name":"mobile ","value":"","defValue":""})
            #button_group({"buttons":[
            {"label":"查询","event":"queryData()","className":"u-btn-primary"},
            {"label":"重置查询","event":"resetSearch()","className":"u-btn-primary"}
            ]})
        #end
    #end
    #datagrid({
        "id":"stmasterTable",
        "name":"stmasterTable",
        "bindFormName":"stmastersearchForm",
        "title":"查询列表",
        "autoLoad":true,
        "url":"/stmaster/liststmaster.json",
        "buttons":[{"label":"新增","cls":"add","event":"add()"} ],
        "items":[
    {"name":"stmasterId",
        "text":"stmasterId",
        "hAlign":"center",
        "tAlign":"center",
        "hidden":true
    },
    {"name":"userAccount",
        "text":"账号",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"userId",
        "text":"userId",
        "hAlign":"center",
        "tAlign":"center",
        "hidden":true
    },

    {"name":"recId",
        "text":"recId",
        "hAlign":"center",
        "tAlign":"center",
        "hidden":true
    },

    {"name":"recName",
        "text":"接待员",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"stmasterQQ",
        "text":"QQ",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"stmasterEmail",
        "text":"邮箱",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"mobile",
        "text":"手机号",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"weChat",
        "text":"微信",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"createTime",
        "text":"接入时间",
        "hAlign":"center",
        "tAlign":"center"
    },

    {"name":"remark",
        "text":"描述",
        "hAlign":"center",
        "tAlign":"center"
    },

    {
        "name":"operation",
        "text":"操作",
        "hAlign":"center",
        "tAlign":"center",
        "hidden":false,
        "width":"200",
        "buttons":[{"label":"解除黑名单","event":"edit"},{"label":"删除","event":"del"}]
    }
    ],
        "numbercolumn":"true",
        "pageConfig":{"pageSize":10,"pageNo":1},
        "rowSelect":"false",
        "hasPage":"true",
        "events":[{"event":"rowClick","function":"queryTableClick"},
    {"event":"rowDblclick","function":"queryTableDbClick"}]
    })
#end


#jscode()
    var action = "";

    function del(rowData){
        Horn.Msg.confirm("确认","这是一条确认信息",function(){
        rowDatarowData = rowData || Horn.getComp('stmasterTable').getSelecteds().length && (Horn.getComp('stmasterTable').getSelecteds())[0];
        var id =  rowData.rowdata.id;
        $.post("${imageServer}/stmaster/deletestmaster",{"id":id},function(backData){
                if(backData){
                if(backData.success){
                Horn.getComp("stmasterTable").load();
                Horn.Tip.info("删除成功");
            }else{
                 Horn.Tip.warn(backData.errorMesg);
            }
            }
            },"json")
        },function(){
             log("确认框的取消执行了")
        });
    }


        function resetSearch(){
            Horn.getComp("stmasterTable").baseParams={};
            Horn.getComp("stmasterTable").load();
        }

    function queryData() {
      Horn.getComp("stmasterTable").load();
    }
#end  